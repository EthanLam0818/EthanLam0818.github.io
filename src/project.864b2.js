window.__require=function e(t,r,i){function o(s,c){if(!r[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var p="function"==typeof __require&&__require;if(!c&&p)return p(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,r,i)}return r[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({FruitsInfo:[function(e,t,r){"use strict";cc._RF.push(t,"d239eIGT49NfJHRerO/1e4v","FruitsInfo"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){}return e.arr=[{sprite:"sprite/cherry",sizeX:25,sizeY:34,offsetY:-5,score:2},{sprite:"sprite/strawberry",sizeX:30,sizeY:34,offsetY:0,score:4},{sprite:"sprite/grape",sizeX:45,sizeY:46,offsetY:-4,score:8},{sprite:"sprite/orange",sizeX:55,sizeY:58,offsetY:-1,score:16},{sprite:"sprite/tangerine",sizeX:68,sizeY:75,offsetY:-2,score:32},{sprite:"sprite/apple",sizeX:80,sizeY:82,offsetY:-6,score:64},{sprite:"sprite/pear",sizeX:90,sizeY:96,offsetY:-2,score:128},{sprite:"sprite/peach",sizeX:120,sizeY:117,offsetY:-5,score:256},{sprite:"sprite/ananas",sizeX:160,sizeY:184,offsetY:-12,score:516},{sprite:"sprite/hamimelon",sizeX:220,sizeY:219,offsetY:-5,score:1024},{sprite:"sprite/watermelon",sizeX:300,sizeY:300,offsetY:0,score:2048}],e}();r.default=i,cc._RF.pop()},{}],Fruit:[function(e,t,r){"use strict";cc._RF.push(t,"377bdcDfuVFM58Achzy6lfW","Fruit");var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(n<3?o(s):n>3?o(t,r,s):o(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var n=e("./FruitsInfo"),s=e("./msg/MsgCenter"),c=cc._decorator,a=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tryMacth=!0,t.level=0,t.score=0,t.timer=0,t}var r;return i(t,e),r=t,Object.defineProperty(t.prototype,"child",{get:function(){return this.node.children[0]},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;cc.tween(this.node).delay(.5).call(function(){e.tryMacth=!1}).start()},t.prototype.init=function(e){var t=n.default.arr[e],r=this.getComponent(cc.Sprite);cc.loader.loadRes(t.sprite,cc.SpriteFrame,function(e,t){r.spriteFrame=t}),r.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.node.setContentSize(t.sizeX,t.sizeY),this.node.zIndex=-e;var i=this.node.getComponent(cc.PhysicsCircleCollider);i.radius=this.node.getContentSize().width/2,i.offset.y=t.offsetY,i.apply(),this.level=e,this.score=t.score,s.default.Ins.dispatch("SCORE",t.score)},t.prototype.update=function(e){var t=this.getComponent(cc.RigidBody).linearVelocity.lengthSqr(),r=this.node.position.y;t<10&&r>130&&!this.tryMacth&&s.default.Ins.dispatch("GAME_OVER")},t.prototype.onBeginContact=function(e,t,i){var o=this;if(!this.tryMacth){var n=i.node.getComponent(r);if(null!=n&&this.level==n.level&&!n.tryMacth){this.tryMacth=!0,n.tryMacth=!0;var s=cc.v2(n.node.position);cc.tween(this.node).to(.05,{position:s}).call(function(){o.init(o.level+=1),o.tryMacth=!1,n.node.destroy()}).start()}}},t=r=o([a],t)}(cc.Component));r.default=p,cc._RF.pop()},{"./FruitsInfo":"FruitsInfo","./msg/MsgCenter":"MsgCenter"}],GameController:[function(e,t,r){"use strict";cc._RF.push(t,"3d1c7d33G1OVJde5JRN2wt6","GameController");var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(n<3?o(s):n>3?o(t,r,s):o(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var n=e("./Fruit"),s=e("./FruitsInfo"),c=e("./msg/MsgCenter"),a=cc._decorator,p=a.ccclass,u=a.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabel=null,t.clampX=200,t.clampY=800,t.isGameOver=!1,t.spawnIndex=0,t.nextIndex=0,t.scoreNum=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this,t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-980),t.enabledAccumulator=!0,cc.PhysicsManager.FIXED_TIME_STEP=1/60,cc.PhysicsManager.POSITION_ITERATIONS=10,cc.director.getCollisionManager().enabled=!0,this.cloudNode.zIndex=-100,this.cloudNode.children[0].zIndex=-99,this.nextFruitSP.sizeMode=cc.Sprite.SizeMode.CUSTOM,c.default.Ins.register("SCORE",this.setScore,this),c.default.Ins.register("GAME_OVER",function(){e.isGameOver=!0},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),this.setCloudPosition(0),this.swicthNextFruits()},t.prototype.onMove=function(e){var t=e.getDeltaX();this.setCloudPosition(t)},t.prototype.onClick=function(e){this.isGameOver||(this.spawnFruits(),this.swicthNextFruits())},t.prototype.setCloudPosition=function(e){var t=this.cloudNode.position;t.y=this.clampY,t.x+=e,t.x<-this.clampX/2&&(t.x=-this.clampX/2),t.x>this.clampX/2&&(t.x=this.clampX/2),this.cloudNode.setPosition(t)},t.prototype.swicthNextFruits=function(){var e=this;this.nextIndex=Math.ceil(5*Math.random())-1;var t=s.default.arr[this.nextIndex];cc.loader.loadRes(t.sprite,cc.SpriteFrame,function(t,r){e.nextFruitSP.spriteFrame=r}),this.nextFruitSP.node.setContentSize(t.sizeX,t.sizeY)},t.prototype.spawnFruits=function(){this.spawnIndex++;var e=cc.instantiate(this.fruitPrefab);e.parent=this.node,e.position=this.cloudNode.position,e.getComponent(n.default).init(this.nextIndex)},t.prototype.setScore=function(e){this.scoreNum+=e,this.scoreLabel.string=this.scoreNum.toString()},o([u(cc.Node)],t.prototype,"cloudNode",void 0),o([u(cc.Sprite)],t.prototype,"nextFruitSP",void 0),o([u(cc.Prefab)],t.prototype,"fruitPrefab",void 0),o([u(cc.Label)],t.prototype,"scoreLabel",void 0),o([u(Number)],t.prototype,"clampX",void 0),o([u(Number)],t.prototype,"clampY",void 0),t=o([p],t)}(cc.Component);r.default=f,cc._RF.pop()},{"./Fruit":"Fruit","./FruitsInfo":"FruitsInfo","./msg/MsgCenter":"MsgCenter"}],MsgCenter:[function(e,t,r){"use strict";cc._RF.push(t,"33e52JNLiJE0YbJog8uxowK","MsgCenter"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){this.eventTarget=new cc.EventTarget}return Object.defineProperty(e,"Ins",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t,r){this.eventTarget.on(e,t,r)},e.prototype.dispatch=function(e,t,r,i,o,n){this.eventTarget.emit(e,t,r,i,o,n)},e.prototype.off=function(e,t,r){this.eventTarget.off(e,t,r)},e.instance=null,e}();r.default=i,cc._RF.pop()},{}],Utiltis:[function(e,t,r){"use strict";cc._RF.push(t,"a19f54cWyZGP5erUh6ROski","Utiltis"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"graphics",{get:function(){if(null==this._graphics){var e=new cc.Node;e.setParent(cc.director.getScene().getChildByName("Canvas")),this._graphics=e.addComponent(cc.Graphics)}return this._graphics},enumerable:!0,configurable:!0}),e.circle_world=function(e,t,r){void 0===r&&(r=cc.Color.WHITE),this.graphics.fillColor=r,this.graphics.circle(e.x,e.y,t),this.graphics.fill()},e.circle_node=function(e,t,r,i){void 0===i&&(i=cc.Color.WHITE);var o=e.getComponent(cc.Graphics);null==o&&(o=e.addComponent(cc.Graphics)),o.fillColor=i,o.circle(t.x,t.y),o.fill()},e._graphics=null,e}();r.default=i,cc._RF.pop()},{}]},{},["Fruit","FruitsInfo","GameController","Utiltis","MsgCenter"]);